import json
import os

FILENAME = "expenses.json"

# –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª
def load_data():
    if os.path.exists(FILENAME):
        with open(FILENAME, "r") as f:
            return json.load(f)
    return {}

# –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
def save_data(data):
    with open(FILENAME, "w") as f:
        json.dump(data, f, indent=2)

# –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é —Ç—Ä–∞—Ç—É
def add_expense(data):
    category = input("–í–≤–µ–¥–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é (–µ–¥–∞, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –∞—Ä–µ–Ω–¥–∞ –∏ —Ç.–¥.): ").lower()
    amount = float(input("–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —Ç—Ä–∞—Ç—ã: "))
    data[category] = data.get(category, 0) + amount
    save_data(data)
    print(f"‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: {amount} —Ä—É–±. –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é '{category}'")

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —Ç—Ä–∞—Ç—ã
def show_expenses(data):
    print("\nüìä –¢–µ–∫—É—â–∏–µ —Ä–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:")
    total = 0
    for category, amount in data.items():
        print(f"- {category}: {amount} —Ä—É–±.")
        total += amount
    print(f"\nüí∞ –û–±—â–∞—è —Å—É–º–º–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤: {total} —Ä—É–±.\n")

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
def main():
    data = load_data()
    while True:
        print("1. –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞—Ç—É")
        print("2. –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç—Ä–∞—Ç—ã")
        print("3. –í—ã–π—Ç–∏")
        choice = input("–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ (1/2/3): ")

        if choice == "1":
            add_expense(data)
        elif choice == "2":
            show_expenses(data)
        elif choice == "3":
            break
        else:
            print("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")

if __name__ == "__main__":
    main()
